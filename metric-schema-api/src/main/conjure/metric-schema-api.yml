types:
  definitions:
    default-package: com.palantir.metric.schema
    objects:
      MetricSchema:
        fields:
          namespaces: map<string, MetricNamespace>
          options:
            docs: >
              Additional pieces of information that do not change the overall declaration,
              but may affect the way it is handled in a particular context. For example,
              `javaPackage` will determine the package of the generated classes.
            type: map<string, string>
      MetricNamespace:
        fields:
          shortName:
            docs: A short name describing the metrics. Used to construct the name of the generated utility class.
            type: optional<string>
          docs: Documentation
          metrics:
            type: map<string,MetricDefinition>
          monitors: map<string, MonitorDefinition>
      MetricDefinition:
        fields:
          type: MetricType
          tags: set<string>
          docs: Documentation
      MetricType:
        values:
          - COUNTER
          - GAUGE
          - METER
          - TIMER
          - HISTOGRAM
      Documentation:
        docs: Documentation describing an associated component. Markdown syntax may be used.
        alias: string
      MonitorDefinition:
        fields:
          docs: Documentation
          query: QueryDefinition
          function: optional<MetricFunction>
          thresholds: MonitorThreshold
      QueryDefinition:
        fields:
          metric: string
          aggregators: MetricAggregator
          tags: list<string>
      MetricAggregator:
        values:
          - AVG
          - MIN
          - MAX
          - SUM
      MetricFunction:
        union:
          rate: RateFunction
      RateFunction:
        fields:
          # time window
          window: integer
      MonitorThreshold:
        # it would be great if these were typed with the metric/function
        fields:
          comparator: Comparator
          critical: optional<string>
          warning: optional<string>
      Comparator:
        values:
          - GREATER_THAN
          - GREATER_THAN_OR_EQUAL
          - LESS_THAN
          - LESS_THAN_OR_EQUAL
